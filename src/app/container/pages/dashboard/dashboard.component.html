<div class="row m-2 align-item-center">
    <app-toggle-button [toggle]="toggleButtons" (toggleClick)="toggleAction($event)"></app-toggle-button>
</div>

<div class="row m-2">
    <app-mat-tab [selectedTabs]="tabButton" (tabMenuClick)="tabMenuAction($event)"></app-mat-tab>
</div>

<div class="row m-2 align-item-center">
    <app-toggle-button [toggle]="child" (subToggleClick)="subToggleAction($event)"
        [type]="'subType'"></app-toggle-button>
</div>


<ng-template #dashboardTemplate let-item="data" let-i="index" let-type="key">
    <div *ngIf="type === 'country'">
        World Map
    </div>
    <div *ngIf="['programViewCard','socialCard'].includes(type)">
        <app-card [columnSize]="'4'" [cardData]="item"></app-card>
    </div>
    <ng-container *ngFor="let value of item; let j=index">
        <div >
            <div class="row justify-content-start align-item-center mx-1 px-1">
                <img [src]="value?.indicator_icons" [alt]="value?.name">
                <h4 class="defaultColor">{{ ['programViewIpsa'].includes(type) && value?.headers?.length ? (value.heading) :(value?.name ) | translate}}</h4>
            </div>
            <div>
                <ng-container *ngIf="['pie','environmentalPie'].includes(type)">
                    <app-pie [pieChartId]="'pie_' + (i+1+j)" [pieData]="value.short_key"></app-pie>
                    <pre>
                        "type ---pie"  >>>>{{type}}
                        "data"  >>>> {{value. short_key | json}}
                    </pre>
                </ng-container>
                <ng-container *ngIf="['socialTimeLine','environmentalTimeLine'].includes(type)">
                    <app-groupBar [groupBarChartId]="'groupBar_' + (i+1+j)" [groupBarData]="value.short_key"></app-groupBar>
                    <pre>
                        "type ---timeline"  >>>>{{type}}
                        "data"  >>>> {{value. short_key | json}}
                    </pre>
                </ng-container>
                <ng-container *ngIf="['groupBar','socialGroupBar','environmentalGroupBar'].includes(type)">
                    <app-groupBar [groupBarChartId]="'groupBar_' + (i+1+j)" [groupBarData]="value.details"></app-groupBar>
                    <pre>
                        "type --- groupBar"  >>>>{{type}}
                        "data"  >>>> {{value. details | json}}
                    </pre>
                </ng-container>
                <ng-container *ngIf="['donut','socialDonut','environmentalDonut','socialPie'].includes(type)">
                    <app-donut [donutChartId]="'donut_' + (i+1+j)" [donutData]="value.short_key"></app-donut>
                    <pre>
                        "type  --- donut"  >>>>{{type}}
                        "data"  >>>> {{value. short_key | json}}
                    </pre>
                </ng-container>
                <ng-container>
                    <app-common-table [displayedColumns]="value.headers" [values]="value.values" *ngIf="value?.headers?.length"></app-common-table>
                </ng-container>
            </div>
        </div>
    </ng-container>
</ng-template>

<div class="row justify-content-md-between m-3 md-3">
    <ng-container *ngFor="let tab of currentTab; let i=index">
        <div class="col-md-6" [ngClass]=" tab === 'programViewCard' ? '' : 'mat-card my-3' ">
            <ng-container
                *ngTemplateOutlet="dashboardTemplate; context:{data : dashboardData[tab][0].data , index : i,key:tab}"></ng-container>
        </div>
    </ng-container>
</div>

